import cyberpi
import event
import time

# connect to WiFi

cyberpi.wifi.connect("Enter WIFI Name", " Enter WIFI Password ")
while not cyberpi.wifi.is_connect():
    pass

# Connection to WiFi is established at this point
# So, print connected! on the display

cyberpi.console.println('Connected!')

cyberpi.mesh_broadcast.set("stop")
time.sleep(0.1)

cyberpi.controller.reset_count("up")

while True:

    if cyberpi.controller.get_count('a') > 1:
        cyberpi.mesh_broadcast.set("a") 
        cyberpi.audio.play("spitfire"), cyberpi.display.clear(), cyberpi.display.show_label("SPEED BOOST!", 100, "center")
        cyberpi.led.on(208, 2, 27, "all")
        time.sleep(2)
        cyberpi.display.clear()
        cyberpi.controller.reset_count("a")

    if cyberpi.controller.is_press("up"):
        cyberpi.mesh_broadcast.set("up")
        cyberpi.led.on(208, 2, 27, "all")  # Turn on LED
        time.sleep(0.5)
        cyberpi.led.off("all")  # Turn off LED

    elif cyberpi.controller.is_press("down"):
        cyberpi.mesh_broadcast.set("down")
        cyberpi.led.on(208, 2, 27, "all")
        time.sleep(0.5)
        cyberpi.led.off("all")

    elif cyberpi.controller.is_press("left"):
        cyberpi.mesh_broadcast.set("left")
        cyberpi.led.on(208, 2, 27, "all")
        time.sleep(0.5)
        cyberpi.led.off("all")

    elif cyberpi.controller.is_press("right"):
        cyberpi.mesh_broadcast.set("right")
        cyberpi.led.on(208, 2, 27, "all")
        time.sleep(0.5)
        cyberpi.led.off("all")

    elif (not cyberpi.controller.is_press("up") and
          not cyberpi.controller.is_press("down") and
          not cyberpi.controller.is_press("left") and
          not cyberpi.controller.is_press("right")):
      
        cyberpi.mesh_broadcast.set("stop")
        time.sleep(0.1)
